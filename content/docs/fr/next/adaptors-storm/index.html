<!DOCTYPE html><html lang="fr"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Adaptateur Pulsar pour Apache Storm · Apache Pulsar</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Pulsar Storm est un adaptateur pour l&#x27;intégration avec les topologies [Apache Storm](http://storm.apache.org/). Il fournit des implémentations de base Storm pour l&#x27;envoi et la réception de données."/><meta name="docsearch:version" content="next"/><meta name="docsearch:language" content="fr"/><meta property="og:title" content="Adaptateur Pulsar pour Apache Storm · Apache Pulsar"/><meta property="og:type" content="website"/><meta property="og:url" content="https://pulsar.incubator.apache.org/"/><meta property="og:description" content="Pulsar Storm est un adaptateur pour l&#x27;intégration avec les topologies [Apache Storm](http://storm.apache.org/). Il fournit des implémentations de base Storm pour l&#x27;envoi et la réception de données."/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://pulsar.incubator.apache.org/img/pulsar.svg"/><link rel="shortcut icon" href="/img/pulsar.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css"/><link rel="alternate" type="application/atom+xml" href="https://pulsar.incubator.apache.org/blog/atom.xml" title="Apache Pulsar Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://pulsar.incubator.apache.org/blog/feed.xml" title="Apache Pulsar Blog RSS Feed"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-102219959-1', 'auto');
              ga('send', 'pageview');
            </script><link rel="stylesheet" href="/css/code-blocks-buttons.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/custom.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/fr"><img class="logo" src="/img/pulsar.svg" alt="Apache Pulsar"/></a><a href="/fr/versions"><h3>next</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/fr/next/standalone" target="_self">Docs</a></li><li class=""><a href="/fr/download" target="_self">Téléchargement</a></li><li class=""><a href="/docs/fr/next/client-libraries" target="_self">Clients</a></li><li class=""><a href="#restapis" target="_self">API REST</a></li><li class=""><a href="#cli" target="_self">Cli</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li><li class=""><a href="#community" target="_self">Communauté</a></li><li class=""><a href="#apache" target="_self">Apache</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>Français</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/en/next/adaptors-storm">English</a></li><li><a href="/docs/ja/next/adaptors-storm">日本語</a></li><li><a href="/docs/ko/next/adaptors-storm">한국어</a></li><li><a href="/docs/zh-CN/next/adaptors-storm">中文</a></li><li><a href="/docs/zh-TW/next/adaptors-storm">繁體中文</a></li><li><a href="https://crowdin.com/project/apache-pulsar" target="_blank" rel="noreferrer noopener">Aidez à traduire</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://crowdin.com/project/apache-pulsar/fr" target="_blank" rel="noreferrer noopener">Translate</a><h1 id="__docusaurus" class="postHeaderTitle">Adaptateur Pulsar pour Apache Storm</h1></header><article><div><span><p>Pulsar Storm est un adaptateur pour l'intégration avec les topologies <a href="http://storm.apache.org/">Apache Storm</a>. Il fournit des implémentations de base Storm pour l'envoi et la réception de données.</p>
<p>Une application peut injecter des données dans une topologie Storm via un spout Pulsar générique, ainsi que consommer des données provenant d'une topologie Storm via un bolt Pulsar générique.</p>
<h2><a class="anchor" aria-hidden="true" id="utilisation-de-ladapteur-pulsar-pour-apache-storm"></a><a href="#utilisation-de-ladapteur-pulsar-pour-apache-storm" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Utilisation de l'adapteur Pulsar pour Apache Storm</h2>
<p>Inclusion de dépendance pour l'adaptateur Pulsar Storm:</p>
<pre><code class="hljs css language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.pulsar<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>pulsar-storm<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${pulsar.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="spout-pulsar"></a><a href="#spout-pulsar" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Spout Pulsar</h2>
<p>Le spout Pulsar permet aux données publiées sur un sujet d'être utilisées par une topologie Storm. Il émet un tuple Storm basé sur le message reçu et le <code>MessageToValuesMapper</code> fourni par le client.</p>
<p>Les tuples qui ne parviennent pas à être traités par les bolts en aval seront réinjectés par le spout avec une temporisation exponentielle, dans un délai configurable (le délai par défaut est de 60 secondes) ou un nombre configurable d'essais, selon ce qui survient en premier, après quoi il sont acquités par le consommateur. Voici un exemple de déclaration d'un spout:</p>
<pre><code class="hljs css language-java">MessageToValuesMapper messageToValuesMapper = <span class="hljs-keyword">new</span> MessageToValuesMapper() {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Values <span class="hljs-title">toValues</span><span class="hljs-params">(Message msg)</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Values(<span class="hljs-keyword">new</span> String(msg.getData()));
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">declareOutputFields</span><span class="hljs-params">(OutputFieldsDeclarer declarer)</span> </span>{
        <span class="hljs-comment">// declare the output fields</span>
        declarer.declare(<span class="hljs-keyword">new</span> Fields(<span class="hljs-string">"string"</span>));
    }
};

<span class="hljs-comment">// Configuration d'un Spout Pulsar</span>
PulsarSpoutConfiguration spoutConf = <span class="hljs-keyword">new</span> PulsarSpoutConfiguration();
spoutConf.setServiceUrl(<span class="hljs-string">"pulsar://broker.messaging.usw.example.com:6650"</span>);
spoutConf.setTopic(<span class="hljs-string">"persistent://my-property/usw/my-ns/my-topic1"</span>);
spoutConf.setSubscriptionName(<span class="hljs-string">"my-subscriber-name1"</span>);
spoutConf.setMessageToValuesMapper(messageToValuesMapper);

<span class="hljs-comment">// Création d'un Spout Pulsar </span>
PulsarSpout spout = <span class="hljs-keyword">new</span> PulsarSpout(spoutConf);
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="bolt-pulsar"></a><a href="#bolt-pulsar" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Bolt Pulsar</h2>
<p>Le bolt Pulsar permet aux données d'une topologie Storm d'être publiées sur un topic. Il publie des messages basé sur le tuple Storm reçu et le <code>TupleToMessageMapper</code> fourni par le client.</p>
<p>Un topic partitionné peut également être utilisé pour publier des messages sur différents topics. Dan l'implémentation du <code>TupleToMessageMapper</code>, une &quot;clé&quot; devra être fournie dans le message qui enverra les messages avec la même clé au même topic. Voici un exemple de bolt:</p>
<pre><code class="hljs css language-java">TupleToMessageMapper tupleToMessageMapper = <span class="hljs-keyword">new</span> TupleToMessageMapper() {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> TypedMessageBuilder&lt;<span class="hljs-keyword">byte</span>[]&gt; toMessage(TypedMessageBuilder&lt;<span class="hljs-keyword">byte</span>[]&gt; msgBuilder, Tuple tuple) {
        String receivedMessage = tuple.getString(<span class="hljs-number">0</span>);
        <span class="hljs-comment">// traitement du message</span>
        String processedMsg = receivedMessage + <span class="hljs-string">"-processed"</span>;
        <span class="hljs-keyword">return</span> msgBuilder.value(processedMsg.getBytes());
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">declareOutputFields</span><span class="hljs-params">(OutputFieldsDeclarer declarer)</span> </span>{
        <span class="hljs-comment">// déclaration des champs en sortie</span>
    }
};

<span class="hljs-comment">// Configuration d'un Bolt Pulsar </span>
PulsarBoltConfiguration boltConf = <span class="hljs-keyword">new</span> PulsarBoltConfiguration();
boltConf.setServiceUrl(<span class="hljs-string">"pulsar://broker.messaging.usw.example.com:6650"</span>);
boltConf.setTopic(<span class="hljs-string">"persistent://my-property/usw/my-ns/my-topic2"</span>);
boltConf.setTupleToMessageMapper(tupleToMessageMapper);

<span class="hljs-comment">// Création d'un Bolt Pulsar </span>
PulsarBolt bolt = <span class="hljs-keyword">new</span> PulsarBolt(boltConf);
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="example"></a><a href="#example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h2>
<p>Vous pouvez trouver un exemple complet <a href="https://github.com/apache/pulsar/tree/master/pulsar-storm/src/test/java/org/apache/pulsar/storm/example/StormExample.java">ici</a>.</p>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#utilisation-de-ladapteur-pulsar-pour-apache-storm">Utilisation de l'adapteur Pulsar pour Apache Storm</a></li><li><a href="#spout-pulsar">Spout Pulsar</a></li><li><a href="#bolt-pulsar">Bolt Pulsar</a></li><li><a href="#example">Example</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="copyright">Copyright © 2020 The Apache Software Foundation. All Rights Reserved. Apache, Apache Pulsar and the Apache feather logo are trademarks of The Apache Software Foundation.</section><span><script>
      const community = document.querySelector("a[href='#community']").parentNode;
      const communityMenu =
        '<li>' +
        '<a id="community-menu" href="#">Community <span style="font-size: 0.75em">&nbsp;▼</span></a>' +
        '<div id="community-dropdown" class="hide">' +
          '<ul id="community-dropdown-items">' +
            '<li><a href="/fr/contact">Contact</a></li>' +
            '<li><a href="/fr/contributing">Contributing</a></li>' +
            '<li><a href="/fr/coding-guide">Coding guide</a></li>' +
            '<li><a href="/fr/events">Events</a></li>' +
            '<li><a href="https://twitter.com/Apache_Pulsar" target="_blank">Twitter &#x2750</a></li>' +
            '<li><a href="https://github.com/apache/pulsar/wiki" target="_blank">Wiki &#x2750</a></li>' +
            '<li><a href="https://github.com/apache/pulsar/issues" target="_blank">Issue tracking &#x2750</a></li>' +
            '<li><a href="https://pulsar-summit.org/" target="_blank">Pulsar Summit &#x2750</a></li>' +
            '<li>&nbsp;</li>' +
            '<li><a href="/fr/resources">Resources</a></li>' +
            '<li><a href="/fr/team">Team</a></li>' +
            '<li><a href="/fr/powered-by">Powered By</a></li>' +
          '</ul>' +
        '</div>' +
        '</li>';

      community.innerHTML = communityMenu;

      const communityMenuItem = document.getElementById("community-menu");
      const communityDropDown = document.getElementById("community-dropdown");
      communityMenuItem.addEventListener("click", function(event) {
        event.preventDefault();

        if (communityDropDown.className == 'hide') {
          communityDropDown.className = 'visible';
        } else {
          communityDropDown.className = 'hide';
        }
      });
    </script></span></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'd226a455cecdd4bc18a554c1b47e5b52',
                indexName: 'apache_pulsar',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:fr","version:next"]}
              });
            </script></body></html>